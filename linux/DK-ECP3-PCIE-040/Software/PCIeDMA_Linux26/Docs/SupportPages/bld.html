<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
</head>
<body>
    This page describes how to build the source code into the demo executables.
    Running the resulting programs is really intended to be done from the Demonstration
    directory using scripts to setup the environment and launch the demo.

    <H2>Building ColorBars, ImageMove or DMATest</H2>
    The demo applications are built in the <b>ColorBars, ImageMove or DMATest</b> directories.
    The build environment is the GNU C++ compiler. The GNU compiler and tools should be installed
    and available on any Linux distribution.
    Command line Makefiles are used to run the compiler and linker.
    <p>
    Before building, the enviroment variable <B>LSC_PCIEAPI_DIR</B> needs to be set to point 
    to the PCIeAPI_Lib directory.  This variable is used by the Makefile to find the PCIeAPI
    header files and link in the shared library (DLL).  The demos use the PCIeAPI library to open the
    driver and create all the device objects accessed in the demo.  The easiest way to set up
    this variable is to run the <b>setup</b> script in the PCIeAPI_Lib directory, or run 
    <b>make devel</b> from the top level Source directory to permanently install the needed paths
    and variables into your .bashrc file.

    <H3>Building</H3>
    Ensure <B>LSC_PCIEAPI_DIR</B> is defined - check with <b>set</b>.  If not, see above. 
    <p>
    Ensure <B>gcc</B> and <B>g++</B> are in the <B>PATH</B>.  Try <B>gcc -v</B> 
    <p>
    From any of the demo directories, run:
    <ul>
	<li><B>make clean</B> to clear any old versions
	<li><B>make debug</B> to build with debugging symbols and event logging
	<li><B>make</B> to build a release version (optimized, no debugging)
    </ul>



    <H3>Installing</H3>
    The driver and the PCIeAPI_Lib need to be installed before the demo can be run.
    There is no special installation needed for the demo programs.  They can be
    run from their directories, or moved into the Demonstration sub-directory.

    <H3>Running</H3>
    The eval board to open is specified by environment variables.  These variables are
    set via scripts in the Demonstration/DMA/ directory.  See <b>runCB.sh</b>
    and <b>runIM.sh</b> for examples.  The boards to connect to can be seen from the
    entries under <b>/dev/lscdma/</b>.
    <p>
    Once the environment varaibles are set (by using the script file to start the demo,
    or manually entering values for  LSC_PCIE_BOARD, LSC_PCIE_IP_ID and LSC_PCIE_INSTANCE)
    the demos can be run.
    <p>
    The demos use the OpenGL graphics library that is should be provided with the standard
    Xwindows install.
    If it is not on your system, then check OpenGL.org for an install package.
    You can verify OpenGL is operational with the following tests:
    <ul>
	<li>glxinfo - displays information about libraries and settings
	<li>glxgears - runs a graphics test program drawing spinning gears
    </ul>


    <H2>Debugging</H2>

    <H3>Diagnostic Output</H3>
    The demo can be built with the <B>debug</b> option to enable verbose output and symbol generation
    for debugging.  This will enable
    logging of events.  The events can be seen by dumping the contents of the system message log.
    To do this, su to root and enter <b>tail -f /var/log/messages</b>.
    <p>
    Monitoring the diagnostic output is the easiest way of tracking the code flow and displaying
    parameter value using printf like statements.  This isn't sophisticated, but it is quick and
    easy to get working and see results.
    <p>
    All the DMA demo applications can use printf (or cout) for debugging.


    <H3>Debugger</H3>
    Build the demo with symbols (make debug) and also rebuild the PCIeAPI_Lib with symbols.
    Then use your favorite C/C++ debugger to load and run the program to debug.


</body>
</html>
