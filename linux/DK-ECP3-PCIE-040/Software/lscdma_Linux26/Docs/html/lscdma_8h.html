<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Lattice PCIeDMA Device Driver : lscdma.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>lscdma.h File Reference</h1><code>#include &lt;linux/init.h&gt;</code><br>
<code>#include &lt;linux/module.h&gt;</code><br>
<code>#include &lt;linux/version.h&gt;</code><br>
<code>#include &lt;linux/kernel.h&gt;</code><br>
<code>#include &lt;linux/fs.h&gt;</code><br>
<code>#include &lt;linux/errno.h&gt;</code><br>
<code>#include &lt;linux/miscdevice.h&gt;</code><br>
<code>#include &lt;linux/major.h&gt;</code><br>
<code>#include &lt;linux/slab.h&gt;</code><br>
<code>#include &lt;linux/proc_fs.h&gt;</code><br>
<code>#include &lt;linux/stat.h&gt;</code><br>
<code>#include &lt;linux/delay.h&gt;</code><br>
<code>#include &lt;linux/tty.h&gt;</code><br>
<code>#include &lt;linux/selection.h&gt;</code><br>
<code>#include &lt;linux/kmod.h&gt;</code><br>
<code>#include &lt;linux/mm.h&gt;</code><br>
<code>#include &lt;linux/vmalloc.h&gt;</code><br>
<code>#include &lt;linux/pagemap.h&gt;</code><br>
<code>#include &lt;linux/pci.h&gt;</code><br>
<code>#include &lt;linux/mman.h&gt;</code><br>
<code>#include &lt;linux/ioport.h&gt;</code><br>
<code>#include &lt;linux/interrupt.h&gt;</code><br>
<code>#include &lt;linux/wait.h&gt;</code><br>
<code>#include &lt;asm/uaccess.h&gt;</code><br>
<code>#include &lt;asm/io.h&gt;</code><br>
<code>#include &lt;asm/pgalloc.h&gt;</code><br>
<code>#include "<a class="el" href="_ioctl_8h-source.html">Ioctl.h</a>"</code><br>
<code>#include "<a class="el" href="_devices_8h-source.html">Devices.h</a>"</code><br>
<code>#include "<a class="el" href="_g_p_i_o_8h-source.html">GPIO.h</a>"</code><br>
<code>#include "<a class="el" href="_s_g_d_m_a_8h-source.html">SGDMA.h</a>"</code><br>

<p>
<a href="lscdma_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_dev_mem_params__t.html">DevMemParams_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_g_d_m_a_operations__t.html">SGDMAOperations_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_b_d_m_a_operations__t.html">CBDMAOperations_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_c_i___dev___b_a_r.html">PCI_Dev_BAR</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_c_i_e___board.html">PCIE_Board</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_l_s_c_d_m_a.html">LSCDMA</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0" doxytag="lscdma.h::TRUE"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>TRUE</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1" doxytag="lscdma.h::FALSE"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>FALSE</b>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a2" doxytag="lscdma.h::WAITING"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>WAITING</b>&nbsp;&nbsp;&nbsp;-2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3" doxytag="lscdma.h::NUM_BARS"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>NUM_BARS</b>&nbsp;&nbsp;&nbsp;MAX_PCI_BARS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a4" doxytag="lscdma.h::NUM_BOARDS"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>NUM_BOARDS</b>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a5" doxytag="lscdma.h::MAX_BOARDS"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_BOARDS</b>&nbsp;&nbsp;&nbsp;(NUM_BOARDS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a6" doxytag="lscdma.h::MINORS_PER_BOARD"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MINORS_PER_BOARD</b>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a7" doxytag="lscdma.h::MAX_MINORS"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_MINORS</b>&nbsp;&nbsp;&nbsp;(MAX_BOARDS * MINORS_PER_BOARD)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a8" doxytag="lscdma.h::DMA_BUFFER_SIZE"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DMA_BUFFER_SIZE</b>&nbsp;&nbsp;&nbsp;(64 * 1024)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a9" doxytag="lscdma.h::SC_BOARD"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SC_BOARD</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a10" doxytag="lscdma.h::ECP2M_BOARD"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ECP2M_BOARD</b>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a11" doxytag="lscdma.h::DMA_DEMO"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DMA_DEMO</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a12" doxytag="lscdma.h::LSCDMA_MINOR_TO_BOARD"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LSCDMA_MINOR_TO_BOARD</b>(a)&nbsp;&nbsp;&nbsp;(a / MINORS_PER_BOARD)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a13" doxytag="lscdma.h::LSCDMA_MINOR_TO_FUNCTION"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>LSCDMA_MINOR_TO_FUNCTION</b>(a)&nbsp;&nbsp;&nbsp;(a &amp; (MINORS_PER_BOARD - 1))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a14" doxytag="lscdma.h::MEM_ACCESS_NUM"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MEM_ACCESS_NUM</b>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a15" doxytag="lscdma.h::COLOR_BARS_NUM"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>COLOR_BARS_NUM</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a16" doxytag="lscdma.h::IMAGE_MOVE_NUM"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>IMAGE_MOVE_NUM</b>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a17" doxytag="lscdma.h::STAT_CMD_REG"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STAT_CMD_REG</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a18" doxytag="lscdma.h::CAP_PTR_REG"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CAP_PTR_REG</b>&nbsp;&nbsp;&nbsp;13</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a19" doxytag="lscdma.h::NUM_SGDMA_CHANNELS"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>NUM_SGDMA_CHANNELS</b>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a20" doxytag="lscdma.h::DMA_WR_CHAN"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DMA_WR_CHAN</b>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a21" doxytag="lscdma.h::DMA_RD_CHAN"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DMA_RD_CHAN</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct_p_c_i___dev___b_a_r.html">PCI_Dev_BAR</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a22">pci_dev_bar_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="struct_p_c_i_e___board.html">PCIE_Board</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a23">pcie_board_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a25">IsrEnableInterrupts</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a26">IsrDisableInterrupts</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">irqreturn_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a27">lscdma_ISR</a> (int irq, void *dev_id, struct pt_regs *regs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a28">lscdma_isr_tasklet</a> (unsigned long)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a29">StartDmaWrite</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, <a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *pChan)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a30">StartDmaRead</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, <a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *pChan)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a31">initDMAChan</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, <a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *pChan, unsigned long userAddr, size_t len, int direction)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a32">releaseDMAChan</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, <a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *pChan)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">UCHAR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a33">rdReg8</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG offset)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">USHORT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a34">rdReg16</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG offset)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">ULONG&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a35">rdReg32</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG offset)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a36">wrReg8</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG offset, UCHAR val)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a37">wrReg16</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG offset, USHORT val)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a38">wrReg32</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG offset, ULONG val)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a39">ReadPCIConfigRegs</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a40">ParsePCIeLinkCap</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a41">GPIO_Setup</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a42">IntrCtrl_Setup</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a43">SGDMA_Init</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a44">SGDMA_Disable</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a45">SGDMA_EnableChan</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG chan, ULONG startBD)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a46">SGDMA_DisableChan</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG chan)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a47">SGDMA_ConfigWrite</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG chan, ULONG nBDs, struct scatterlist *pSGlist, ULONG burstSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a48">SGDMA_ConfigRead</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd, ULONG chan, ULONG nBDs, struct scatterlist *pSGlist, ULONG burstSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a49">SGDMA_StartWriteChan</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="lscdma_8h.html#a50">SGDMA_StartReadChan</a> (<a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *pBrd)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a24" doxytag="lscdma.h::DrvrDebug"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>DrvrDebug</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
Definition in file <a class="el" href="lscdma_8h-source.html">lscdma.h</a>.<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a22" doxytag="lscdma.h::pci_dev_bar_t"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="struct_p_c_i___dev___b_a_r.html">PCI_Dev_BAR</a>  <a class="el" href="struct_p_c_i___dev___b_a_r.html">pci_dev_bar_t</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is the private data for each board's BAR that is mapped in. NOTE: each structure MUST have minor as the first entry because it it tested by a void * to see what BAR it is - See mmap() 
<p>
Referenced by <a class="el" href="_main_8c-source.html#l01133">lscdma_mmap()</a>, and <a class="el" href="_main_8c-source.html#l00186">lscdma_read_procmem()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="lscdma.h::pcie_board_t"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="struct_p_c_i_e___board.html">PCIE_Board</a>  <a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The data about each unique Board (device) in the system controlled by this driver. 
<p>
Referenced by <a class="el" href="_devices_8c-source.html#l00335">GPIO_Setup()</a>, <a class="el" href="_d_m_a_8c-source.html#l00114">initDMAChan()</a>, <a class="el" href="_devices_8c-source.html#l00364">IntrCtrl_Setup()</a>, <a class="el" href="_main_8c-source.html#l00929">lscdma_ioctl()</a>, <a class="el" href="_main_8c-source.html#l01133">lscdma_mmap()</a>, <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>, <a class="el" href="_main_8c-source.html#l01211">lscdma_read()</a>, <a class="el" href="_main_8c-source.html#l01305">lscdma_write()</a>, <a class="el" href="_devices_8c-source.html#l00182">ParsePCIeLinkCap()</a>, <a class="el" href="_devices_8c-source.html#l00045">rdReg16()</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, <a class="el" href="_devices_8c-source.html#l00026">rdReg8()</a>, <a class="el" href="_devices_8c-source.html#l00137">ReadPCIConfigRegs()</a>, <a class="el" href="_d_m_a_8c-source.html#l00338">releaseDMAChan()</a>, <a class="el" href="_devices_8c-source.html#l00598">SGDMA_ConfigRead()</a>, <a class="el" href="_devices_8c-source.html#l00524">SGDMA_ConfigWrite()</a>, <a class="el" href="_devices_8c-source.html#l00439">SGDMA_Disable()</a>, <a class="el" href="_devices_8c-source.html#l00490">SGDMA_DisableChan()</a>, <a class="el" href="_devices_8c-source.html#l00457">SGDMA_EnableChan()</a>, <a class="el" href="_devices_8c-source.html#l00408">SGDMA_Init()</a>, <a class="el" href="_devices_8c-source.html#l00683">SGDMA_StartReadChan()</a>, <a class="el" href="_devices_8c-source.html#l00663">SGDMA_StartWriteChan()</a>, <a class="el" href="_d_m_a_8c-source.html#l00065">StartDmaRead()</a>, <a class="el" href="_d_m_a_8c-source.html#l00024">StartDmaWrite()</a>, <a class="el" href="_devices_8c-source.html#l00099">wrReg16()</a>, <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>, and <a class="el" href="_devices_8c-source.html#l00082">wrReg8()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a41" doxytag="lscdma.h::GPIO_Setup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int GPIO_Setup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the GPIO IP module. Disable counter circuits and DMA triggers. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00335">335</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="_devices_8h-source.html#l00092">GPIO</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="lscdma.h::initDMAChan"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int initDMAChan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pChan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>userAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>direction</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the data elements that control the SGDMA operation.<p>
use info from User's vritual buffer - length,<p>
this assumes that the transfer can be done with one mapping. It does not try to handle splitting the entire xfer among multiple allocations of SG lists and maps.<p>
Code takes advantage of the fact that the biggest move is 1MB and that can fit within the 256 BD's. If you need to move more than 1 MB (i.e. need more than 256 BD's) then this code needs to be changed to handle it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pChan</em>&nbsp;</td><td>specific DMA channel of a board/device that is being setup for the transfer, read or write channel.  direction specifies reading or writing, use PCI_DMA_TODEVICE or PCI_DMA_FRPOMDEVICE </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_d_m_a_8c-source.html#l00114">114</a> of file <a class="el" href="_d_m_a_8c-source.html">DMA.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00141">DMAChannel_t::bufBaseVirtualAddr</a>, <a class="el" href="lscdma_8h-source.html#l00134">DMAChannel_t::cancelDMA</a>, <a class="el" href="lscdma_8h-source.html#l00155">DMAChannel_t::direction</a>, <a class="el" href="lscdma_8h-source.html#l00167">SGDMAOperations_t::DmaOk</a>, <a class="el" href="lscdma_8h-source.html#l00133">DMAChannel_t::doneDMA</a>, <a class="el" href="lscdma_8h-source.html#l00137">DMAChannel_t::elapsedTime</a>, <a class="el" href="lscdma_8h-source.html#l00254">PCIE_Board::IRQ</a>, <a class="el" href="lscdma_8h-source.html#l00143">DMAChannel_t::isDmaAddr64</a>, <a class="el" href="lscdma_8h-source.html#l00152">DMAChannel_t::numPages</a>, <a class="el" href="lscdma_8h-source.html#l00151">DMAChannel_t::pageList</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="lscdma_8h-source.html#l00272">PCIE_Board::pPciDev</a>, <a class="el" href="lscdma_8h-source.html#l00278">PCIE_Board::SGDMA</a>, <a class="el" href="lscdma_8h-source.html#l00154">DMAChannel_t::sgLen</a>, <a class="el" href="lscdma_8h-source.html#l00153">DMAChannel_t::sgList</a>, <a class="el" href="lscdma_8h-source.html#l00140">DMAChannel_t::thisXferSize</a>, <a class="el" href="lscdma_8h-source.html#l00138">DMAChannel_t::totalXferSize</a>, and <a class="el" href="lscdma_8h-source.html#l00139">DMAChannel_t::xferedSoFar</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l01211">lscdma_read()</a>, and <a class="el" href="_main_8c-source.html#l01305">lscdma_write()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="lscdma.h::IntrCtrl_Setup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int IntrCtrl_Setup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize Interrupt Controller IP module. Disable all interrupts globally and mask all sources. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00364">364</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="_devices_8h-source.html#l00092">GPIO</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="lscdma.h::IsrDisableInterrupts"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool IsrDisableInterrupts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
IsrDisableInterrupts: Disable device interrupts 
<p>
Definition at line <a class="el" href="_i_s_r_8c-source.html#l00059">59</a> of file <a class="el" href="_i_s_r_8c-source.html">ISR.c</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>, and <a class="el" href="_main_8c-source.html#l00848">lscdma_release()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="lscdma.h::IsrEnableInterrupts"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool IsrEnableInterrupts           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable device interrupts by setting the Global output enable bit in the interrupt controller. 
<p>
Definition at line <a class="el" href="_i_s_r_8c-source.html#l00076">76</a> of file <a class="el" href="_i_s_r_8c-source.html">ISR.c</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="lscdma.h::lscdma_ISR"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">irqreturn_t lscdma_ISR           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>irq</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>dev_id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct pt_regs *&nbsp;</td>
          <td class="mdname" nowrap> <em>regs</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The ISR that is invoked by the kernel in interrupt context when the interrupt line is active (as attached in to the IRQ in open()). The only job is to verify that our board is generating the interrupt and then signal the bottom-half to run in regular kernel context and process the interrupt. 
<p>
Definition at line <a class="el" href="_i_s_r_8c-source.html#l00094">94</a> of file <a class="el" href="_i_s_r_8c-source.html">ISR.c</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="lscdma.h::lscdma_isr_tasklet"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void lscdma_isr_tasklet           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is scheduled to run by the ISR and is run in the kernel context. It then triggers any process(es) waiting on the ISR to have happened. 
<p>
Definition at line <a class="el" href="_i_s_r_8c-source.html#l00139">139</a> of file <a class="el" href="_i_s_r_8c-source.html">ISR.c</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="lscdma.h::ParsePCIeLinkCap"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParsePCIeLinkCap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Process the pre-loaded PCI Config Space 0 registers and extract the PCIe link capabilities from it. The link info is set into the PCIeMaxPayloadSize, PCIeMaxReadReqSize, PCIeLinkWidth and PCIeRCBSize varaibles in the device extension. <dl compact><dt><b>Note:</b></dt><dd>This function requires the PciCfg buf to have been loaded by a call to <a class="el" href="_devices_8c.html#a6">ReadPCIConfigRegs()</a>, which is normally done at the very beginning of StartDevice. </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if PCIE Cpabailties structure was found and parsed false if errors in parsing. </dd></dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00182">182</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00249">PCIE_Board::PCICfgRegs</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="lscdma_8h-source.html#l00248">PCIE_Board::PCIeLinkWidth</a>, <a class="el" href="lscdma_8h-source.html#l00245">PCIE_Board::PCIeMaxPayloadSize</a>, <a class="el" href="lscdma_8h-source.html#l00246">PCIE_Board::PCIeMaxReadReqSize</a>, <a class="el" href="lscdma_8h-source.html#l00247">PCIE_Board::PCIeRCBSize</a>, and <a class="el" href="_devices_8c-source.html#l00137">ReadPCIConfigRegs()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="lscdma.h::rdReg16"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">USHORT rdReg16           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a 16 bit hardware register and return the word. <dl compact><dt><b>Note:</b></dt><dd>No parameter checking is done. The caller is responsible for ensuring the hardware is still mapped (i.e. device state != stopped or removed) and valid. The goal is speed here.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to the Board to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>in board's mapped control BAR to read from </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>16 bit value read from the hardware register </dd></dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00045">45</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00267">PCIE_Board::ctrlBARaddr</a>, and <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="lscdma.h::rdReg32"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ULONG rdReg32           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a 32 bit hardware register and return the word. <dl compact><dt><b>Note:</b></dt><dd>No parameter checking is done. The caller is responsible for ensuring the hardware is still mapped (i.e. device state != stopped or removed) and valid. The goal is speed here.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to the Board to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>in board's mapped control BAR to read from </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>32 bit value read from the hardware register </dd></dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00064">64</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00267">PCIE_Board::ctrlBARaddr</a>, and <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>.
<p>
Referenced by <a class="el" href="_devices_8c-source.html#l00335">GPIO_Setup()</a>, <a class="el" href="_devices_8c-source.html#l00364">IntrCtrl_Setup()</a>, <a class="el" href="_devices_8c-source.html#l00598">SGDMA_ConfigRead()</a>, <a class="el" href="_devices_8c-source.html#l00524">SGDMA_ConfigWrite()</a>, <a class="el" href="_devices_8c-source.html#l00490">SGDMA_DisableChan()</a>, <a class="el" href="_devices_8c-source.html#l00457">SGDMA_EnableChan()</a>, <a class="el" href="_devices_8c-source.html#l00683">SGDMA_StartReadChan()</a>, and <a class="el" href="_devices_8c-source.html#l00663">SGDMA_StartWriteChan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="lscdma.h::rdReg8"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">UCHAR rdReg8           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a 8 bit hardware register and return the word. <dl compact><dt><b>Note:</b></dt><dd>No parameter checking is done. The caller is responsible for ensuring the hardware is still mapped (i.e. device state != stopped or removed) and valid. The goal is speed here.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to the Board to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>in board's mapped control BAR to read from </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>8 bit value read from the hardware register </dd></dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00026">26</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00267">PCIE_Board::ctrlBARaddr</a>, and <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="lscdma.h::ReadPCIConfigRegs"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ReadPCIConfigRegs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read the 256 bytes of PCI Cfg0 register space from the device hardware. The register data is saved in the Device Extension PCICfgRegs array. 
<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00137">137</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00249">PCIE_Board::PCICfgRegs</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, and <a class="el" href="lscdma_8h-source.html#l00272">PCIE_Board::pPciDev</a>.
<p>
Referenced by <a class="el" href="_devices_8c-source.html#l00182">ParsePCIeLinkCap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="lscdma.h::releaseDMAChan"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int releaseDMAChan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pChan</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Release the data elements used in the SGDMA operation.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to the specific device </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pChan</em>&nbsp;</td><td>specific DMA channel of a board/device that is being setup for the transfer, read or write channel. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_d_m_a_8c-source.html#l00338">338</a> of file <a class="el" href="_d_m_a_8c-source.html">DMA.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00141">DMAChannel_t::bufBaseVirtualAddr</a>, <a class="el" href="lscdma_8h-source.html#l00155">DMAChannel_t::direction</a>, <a class="el" href="lscdma_8h-source.html#l00152">DMAChannel_t::numPages</a>, <a class="el" href="lscdma_8h-source.html#l00151">DMAChannel_t::pageList</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="lscdma_8h-source.html#l00272">PCIE_Board::pPciDev</a>, <a class="el" href="lscdma_8h-source.html#l00154">DMAChannel_t::sgLen</a>, and <a class="el" href="lscdma_8h-source.html#l00153">DMAChannel_t::sgList</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l01211">lscdma_read()</a>, and <a class="el" href="_main_8c-source.html#l01305">lscdma_write()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="lscdma.h::SGDMA_ConfigRead"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SGDMA_ConfigRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>nBDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct scatterlist *&nbsp;</td>
          <td class="mdname" nowrap> <em>pSGlist</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>burstSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Configure the Channel to do a read from the PC using a Scatter Gather list. This setups up the buffer descriptors. <a class="el" href="_devices_8c.html#a12">SGDMA_EnableChan()</a> should be called before this to setup the channel for transfer. Finally call <a class="el" href="_devices_8c.html#a17">SGDMA_StartReadChan()</a> to start the transfer.<p>
<dl compact><dt><b>Note:</b></dt><dd>The channel must have a valid start BD programed into its config register before calling this function. This function uses that register value to locate the BDs to configure.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>the SGDMA channel number to setup for MRd to PC </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nBDs</em>&nbsp;</td><td>number of buffer descriptors this channel can use, 256 max </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pSGlist</em>&nbsp;</td><td>the PC mapping of virtual memory pages, destination of MWr </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>burstSize</em>&nbsp;</td><td>the max MWr TLP payload size, normally 128 bytes </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00598">598</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00122">DevMemParams_t::addrMode</a>, <a class="el" href="lscdma_8h-source.html#l00120">DevMemParams_t::baseAddr</a>, <a class="el" href="lscdma_8h-source.html#l00177">SGDMAOperations_t::Chan</a>, <a class="el" href="lscdma_8h-source.html#l00121">DevMemParams_t::dataWidth</a>, <a class="el" href="lscdma_8h-source.html#l00148">DMAChannel_t::DevMem</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, <a class="el" href="lscdma_8h-source.html#l00278">PCIE_Board::SGDMA</a>, <a class="el" href="_devices_8h-source.html#l00093">SGDMA</a>, <a class="el" href="_devices_8h-source.html#l00099">WB</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_d_m_a_8c-source.html#l00065">StartDmaRead()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="lscdma.h::SGDMA_ConfigWrite"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SGDMA_ConfigWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>nBDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct scatterlist *&nbsp;</td>
          <td class="mdname" nowrap> <em>pSGlist</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>burstSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Configure the Channel to do a write to PC using a Scatter Gather list. This setups up the buffer descriptors. <a class="el" href="_devices_8c.html#a12">SGDMA_EnableChan()</a> should be called before this to setup the channel for transfer. Finally call <a class="el" href="_devices_8c.html#a16">SGDMA_StartWriteChan()</a> to start the transfer.<p>
<dl compact><dt><b>Note:</b></dt><dd>The channel must have a valid start BD programed into its config register before calling this function. This function uses that register value to locate the BDs to configure.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>the SGDMA channel number to setup for MWr to PC </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nBDs</em>&nbsp;</td><td>number of buffer descriptors this channel can use, 256 max </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pSGlist</em>&nbsp;</td><td>the PC mapping of virtual memory pages, destination of MWr </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>burstSize</em>&nbsp;</td><td>the max MWr TLP payload size, normally 128 bytes </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00524">524</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00122">DevMemParams_t::addrMode</a>, <a class="el" href="lscdma_8h-source.html#l00120">DevMemParams_t::baseAddr</a>, <a class="el" href="lscdma_8h-source.html#l00177">SGDMAOperations_t::Chan</a>, <a class="el" href="lscdma_8h-source.html#l00121">DevMemParams_t::dataWidth</a>, <a class="el" href="lscdma_8h-source.html#l00148">DMAChannel_t::DevMem</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, <a class="el" href="lscdma_8h-source.html#l00278">PCIE_Board::SGDMA</a>, <a class="el" href="_devices_8h-source.html#l00093">SGDMA</a>, <a class="el" href="_devices_8h-source.html#l00099">WB</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_d_m_a_8c-source.html#l00024">StartDmaWrite()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="lscdma.h::SGDMA_Disable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SGDMA_Disable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disable the SGDMA core. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00439">439</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8h-source.html#l00093">SGDMA</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="lscdma.h::SGDMA_DisableChan"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SGDMA_DisableChan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clear bits in the global registers in the SGDMA to disable a specific channel. Preserve other bit settings.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>the DMA channel to configure </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00490">490</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, <a class="el" href="_devices_8h-source.html#l00093">SGDMA</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l01211">lscdma_read()</a>, <a class="el" href="_main_8c-source.html#l00848">lscdma_release()</a>, and <a class="el" href="_main_8c-source.html#l01305">lscdma_write()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="lscdma.h::SGDMA_EnableChan"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SGDMA_EnableChan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>startBD</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Configure the global registers in the SGDMA for a specific channel. Preserve other bit settings. Enable channel after its setup.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>the DMA channel to configure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>startBD</em>&nbsp;</td><td>the buffer descriptor this channel starts at </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00457">457</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, <a class="el" href="_devices_8h-source.html#l00093">SGDMA</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_d_m_a_8c-source.html#l00065">StartDmaRead()</a>, and <a class="el" href="_d_m_a_8c-source.html#l00024">StartDmaWrite()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="lscdma.h::SGDMA_Init"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int SGDMA_Init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Configure the global registers in the SGDMA for this specific hardware design. Chan0 = write, Chan1-4 = reads<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to device extension to get hardware BAR address </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00408">408</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8h-source.html#l00093">SGDMA</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="lscdma.h::SGDMA_StartReadChan"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool SGDMA_StartReadChan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable SGDMA Read interrupts and trigger the transfer. This is a critical section of code, and is held by the hdwAccess spinlock so only one thread at a time can modify the Interrupt controller enable register. 
<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00683">683</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="_devices_8h-source.html#l00092">GPIO</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_d_m_a_8c-source.html#l00065">StartDmaRead()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="lscdma.h::SGDMA_StartWriteChan"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool SGDMA_StartWriteChan           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pBrd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable SGDMA Write interrupts and trigger the transfer. This is a critical section of code, and is held by the HdwAccess spinlock so only one thread at a time can modify the Interrupt controller enable register. 
<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00663">663</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="_devices_8h-source.html#l00092">GPIO</a>, <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="_devices_8c-source.html#l00064">rdReg32()</a>, and <a class="el" href="_devices_8c-source.html#l00114">wrReg32()</a>.
<p>
Referenced by <a class="el" href="_d_m_a_8c-source.html#l00024">StartDmaWrite()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="lscdma.h::StartDmaRead"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void StartDmaRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pChan</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable the read channel and start the DMA.<p>
NOTE: this function should be called after obtaining the hdwAccess spin_lock using spin_lock_irqsave() to ensure the ISR is not running and about to modify the interrupt controller or SGDMA registers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>specific hardware board to access and setup </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pChan</em>&nbsp;</td><td>DMA channel </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_d_m_a_8c-source.html#l00065">65</a> of file <a class="el" href="_d_m_a_8c-source.html">DMA.c</a>.
<p>
References <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="lscdma_8h-source.html#l00170">SGDMAOperations_t::ReadBurstSize</a>, <a class="el" href="lscdma_8h-source.html#l00278">PCIE_Board::SGDMA</a>, <a class="el" href="_devices_8c-source.html#l00598">SGDMA_ConfigRead()</a>, <a class="el" href="_devices_8c-source.html#l00457">SGDMA_EnableChan()</a>, <a class="el" href="_devices_8c-source.html#l00683">SGDMA_StartReadChan()</a>, <a class="el" href="lscdma_8h-source.html#l00154">DMAChannel_t::sgLen</a>, <a class="el" href="lscdma_8h-source.html#l00153">DMAChannel_t::sgList</a>, and <a class="el" href="lscdma_8h-source.html#l00146">DMAChannel_t::startBD</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l01305">lscdma_write()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="lscdma.h::StartDmaWrite"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void StartDmaWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_d_m_a_channel__t.html">DMAChannel_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pChan</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable the write channel and start the DMA.<p>
NOTE: this function should be called after obtaining the hdwAccess spin_lock using spin_lock_irqsave() to ensure the ISR is not running and about to modify the interrupt controller or SGDMA registers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>specific hardware board to access and setup </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pChan</em>&nbsp;</td><td>DMA channel </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_d_m_a_8c-source.html#l00024">24</a> of file <a class="el" href="_d_m_a_8c-source.html">DMA.c</a>.
<p>
References <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>, <a class="el" href="lscdma_8h-source.html#l00278">PCIE_Board::SGDMA</a>, <a class="el" href="_devices_8c-source.html#l00524">SGDMA_ConfigWrite()</a>, <a class="el" href="_devices_8c-source.html#l00457">SGDMA_EnableChan()</a>, <a class="el" href="_devices_8c-source.html#l00663">SGDMA_StartWriteChan()</a>, <a class="el" href="lscdma_8h-source.html#l00154">DMAChannel_t::sgLen</a>, <a class="el" href="lscdma_8h-source.html#l00153">DMAChannel_t::sgList</a>, <a class="el" href="lscdma_8h-source.html#l00146">DMAChannel_t::startBD</a>, and <a class="el" href="lscdma_8h-source.html#l00169">SGDMAOperations_t::WriteBurstSize</a>.
<p>
Referenced by <a class="el" href="_main_8c-source.html#l01211">lscdma_read()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="lscdma.h::wrReg16"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void wrReg16           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>USHORT&nbsp;</td>
          <td class="mdname" nowrap> <em>val</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a 16 bit value to a hardware register. <dl compact><dt><b>Note:</b></dt><dd>No parameter checking is done. The caller is responsible for ensuring the hardware is still mapped (i.e. device state != stopped or removed) and valid.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to Board to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>in the board's mapped control BAR to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>the 16 bit value to write </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00099">99</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00267">PCIE_Board::ctrlBARaddr</a>, and <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="lscdma.h::wrReg32"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void wrReg32           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>val</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a 32 bit value to a hardware register. <dl compact><dt><b>Note:</b></dt><dd>No parameter checking is done. The caller is responsible for ensuring the hardware is still mapped (i.e. device state != stopped or removed) and valid.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to Board to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>in the board's mapped control BAR to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>the long value to write </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00114">114</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00267">PCIE_Board::ctrlBARaddr</a>, and <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>.
<p>
Referenced by <a class="el" href="_devices_8c-source.html#l00335">GPIO_Setup()</a>, <a class="el" href="_devices_8c-source.html#l00364">IntrCtrl_Setup()</a>, <a class="el" href="_main_8c-source.html#l00564">lscdma_open()</a>, <a class="el" href="_main_8c-source.html#l00848">lscdma_release()</a>, <a class="el" href="_devices_8c-source.html#l00598">SGDMA_ConfigRead()</a>, <a class="el" href="_devices_8c-source.html#l00524">SGDMA_ConfigWrite()</a>, <a class="el" href="_devices_8c-source.html#l00439">SGDMA_Disable()</a>, <a class="el" href="_devices_8c-source.html#l00490">SGDMA_DisableChan()</a>, <a class="el" href="_devices_8c-source.html#l00457">SGDMA_EnableChan()</a>, <a class="el" href="_devices_8c-source.html#l00408">SGDMA_Init()</a>, <a class="el" href="_devices_8c-source.html#l00683">SGDMA_StartReadChan()</a>, and <a class="el" href="_devices_8c-source.html#l00663">SGDMA_StartWriteChan()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="lscdma.h::wrReg8"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void wrReg8           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_p_c_i_e___board.html">pcie_board_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pBrd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ULONG&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>UCHAR&nbsp;</td>
          <td class="mdname" nowrap> <em>val</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a 8 bit value to a hardware register. <dl compact><dt><b>Note:</b></dt><dd>No parameter checking is done. The caller is responsible for ensuring the hardware is still mapped (i.e. device state != stopped or removed) and valid.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pBrd</em>&nbsp;</td><td>pointer to Board to get hardware BAR address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>in the board's mapped control BAR to write to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>the 8 bit value to write </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_devices_8c-source.html#l00082">82</a> of file <a class="el" href="_devices_8c-source.html">Devices.c</a>.
<p>
References <a class="el" href="lscdma_8h-source.html#l00267">PCIE_Board::ctrlBARaddr</a>, and <a class="el" href="lscdma_8h.html#a23">pcie_board_t</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jul 16 12:05:24 2008 for Lattice PCIeDMA Device Driver  by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
