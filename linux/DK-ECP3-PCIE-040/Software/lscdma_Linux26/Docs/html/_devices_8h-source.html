<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Lattice PCIeDMA Device Driver : Devices.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Devices.h</h1><a href="_devices_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> *  COPYRIGHT (c) 2008 by Lattice Semiconductor Corporation</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * All rights reserved. All use of this software and documentation is</span>
00005 <span class="comment"> * subject to the License Agreement located in the file LICENSE.</span>
00006 <span class="comment"> */</span>
00007 
00017 <span class="preprocessor">#ifndef DEVICES_H</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#define DEVICES_H</span>
00019 <span class="preprocessor"></span>
00020 
00021 <span class="preprocessor">#ifndef MAX_PCI_BARS</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define MAX_PCI_BARS 7</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00024 <span class="preprocessor"></span>
00025 <span class="comment">/* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! */</span>
00026 <span class="comment">//   --- NOTICE --- NOTICE --- NOTICE</span>
00027 <span class="comment">// This is the requested size for the common buffer</span>
00028 <span class="comment">// DMA block.  The kernel may not give us this much</span>
00029 <span class="comment">// memory, so always use pBrd-&gt;CBDMA.DmaBufSize</span>
00030 <span class="comment">// for length checks.  It has the actual size.</span>
00031 <span class="comment">/* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! */</span>
<a name="l00032"></a><a class="code" href="_devices_8h.html#a1">00032</a> <span class="preprocessor">#define SYS_MEM_BUF_SIZE (64 * 1024)  </span>
<a name="l00033"></a><a class="code" href="_devices_8h.html#a2">00033</a> <span class="preprocessor">#define DMA_MEM_BUF_SIZE (64 * 1024)  </span>
00035 <span class="preprocessor">#ifndef SYS_DMA_BUF_SIZE </span>
<a name="l00036"></a><a class="code" href="_devices_8h.html#a3">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define SYS_DMA_BUF_SIZE (64 * 1024)  </span>
00037 <span class="preprocessor">#endif</span>
00038 <span class="preprocessor"></span>
<a name="l00039"></a><a class="code" href="_devices_8h.html#a4">00039</a> <span class="preprocessor">#define SGDMA_MAX_SIZE (1024 * 1024)  </span>
<a name="l00050"></a><a class="code" href="_devices_8h.html#a5">00050</a> <span class="preprocessor">#define MAX_DMA_WR_BDS 256  </span>
<a name="l00051"></a><a class="code" href="_devices_8h.html#a6">00051</a> <span class="preprocessor">#define MAX_DMA_RD_BDS 16   </span>
<a name="l00055"></a><a class="code" href="_devices_8h.html#a27">00055</a> <span class="preprocessor">typedef ULONG BARAddr_t;     </span>
<a name="l00061"></a><a class="code" href="_devices_8h.html#a7">00061</a> <span class="preprocessor">#define BAR0(a) (0x00000000 | a)</span>
00062 <span class="preprocessor"></span><span class="preprocessor">#define BAR1(a) (0x10000000 | a)</span>
00063 <span class="preprocessor"></span><span class="preprocessor">#define BAR2(a) (0x20000000 | a)</span>
00064 <span class="preprocessor"></span><span class="preprocessor">#define BAR3(a) (0x30000000 | a)</span>
00065 <span class="preprocessor"></span><span class="preprocessor">#define BAR4(a) (0x40000000 | a)</span>
00066 <span class="preprocessor"></span><span class="preprocessor">#define BAR5(a) (0x50000000 | a)</span>
00067 <span class="preprocessor"></span><span class="preprocessor">#define BAREXP(a) (0x60000000 | a)</span>
00068 <span class="preprocessor"></span>
<a name="l00069"></a><a class="code" href="_devices_8h.html#a14">00069</a> <span class="preprocessor">#define OFFSET2BAR(o) (o&gt;&gt;28)            </span>
<a name="l00070"></a><a class="code" href="_devices_8h.html#a15">00070</a> <span class="preprocessor">#define OFFSET2ADDR(o) (o &amp; 0x0fffffff)  </span>
<a name="l00072"></a><a class="code" href="_devices_8h.html#a16">00072</a> <span class="preprocessor">#define BARADDR2BAR(o) (o&gt;&gt;28)   </span>
<a name="l00073"></a><a class="code" href="_devices_8h.html#a17">00073</a> <span class="preprocessor">#define BARADDR2OFFSET(o) (o &amp; 0x0fffffff)   </span>
<a name="l00074"></a><a class="code" href="_devices_8h.html#a18">00074</a> <span class="preprocessor">#define MAKE_BARADDR(n, o) ((n&lt;&lt;28) | (o &amp; 0x0fffffff))  </span>
<a name="l00076"></a><a class="code" href="_devices_8h.html#a19">00076</a> <span class="preprocessor">#define MAX_RW_BLOCK_SIZE 4096   </span>
00079 <span class="preprocessor"></span><span class="comment">/*=====================================================================*/</span>
00080 <span class="comment">/* NOTE:</span>
00081 <span class="comment"> * For the Linux version of the driver, we are only supporting a</span>
00082 <span class="comment"> * single BAR for the control plane access to the IP.  In the case</span>
00083 <span class="comment"> * of the DMA demo, BAR0 is that such BAR.  It is registered and</span>
00084 <span class="comment"> * mapped based on the demo type.</span>
00085 <span class="comment"> * The BAR macros really aren't needed then, since BAR0() equates to</span>
00086 <span class="comment"> * nothing added to the device base address.  We're keeping the </span>
00087 <span class="comment"> * macros and usage though, just in case we want to add multiple</span>
00088 <span class="comment"> * BAR support in the future.</span>
00089 <span class="comment"> */</span>
00090 <span class="comment">/*=====================================================================*/</span>
00091 
<a name="l00092"></a><a class="code" href="_devices_8h.html#a20">00092</a> <span class="preprocessor">#define GPIO(i)     ((BAR0(0x0000)) + i)  </span>
<a name="l00093"></a><a class="code" href="_devices_8h.html#a21">00093</a> <span class="preprocessor">#define SGDMA(i)    ((BAR0(0x2000)) + i)  </span>
<a name="l00094"></a><a class="code" href="_devices_8h.html#a22">00094</a> <span class="preprocessor">#define IMG_FIFO(i) ((BAR0(0x4000)) + i)  </span>
<a name="l00095"></a><a class="code" href="_devices_8h.html#a23">00095</a> <span class="preprocessor">#define EBR_64(i)  ((BAR0(0x10000)) + i)  </span>
<a name="l00096"></a><a class="code" href="_devices_8h.html#a24">00096</a> <span class="preprocessor">#define EBR64_SIZE (64 * 1024)            </span>
<a name="l00097"></a><a class="code" href="_devices_8h.html#a25">00097</a> <span class="preprocessor">#define IMG_FIFO_FRAME_SIZE (1024 * 1024) </span>
<a name="l00099"></a><a class="code" href="_devices_8h.html#a26">00099</a> <span class="preprocessor">#define WB(a) (a &amp; 0x0fffffff)   </span>
00102 <span class="preprocessor">#include "SGDMA.h"</span>
00103 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="_g_p_i_o_8h.html">GPIO.h</a>"</span>
00104 
00105 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jul 16 12:05:24 2008 for Lattice PCIeDMA Device Driver  by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
